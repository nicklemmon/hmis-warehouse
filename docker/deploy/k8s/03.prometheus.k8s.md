# Graphing of metrics

https://docs.aws.amazon.com/eks/latest/userguide/prometheus.html

https://hub.helm.sh/charts/stable/grafana

https://helm.sh/

## Make prometheus namespace

        kubectl create namespace prometheus

## Install helm

Macs might be this:

        brew install helm

Linux
        curl https://raw.githubusercontent.com/helm/helm/master/scripts/get-helm-3 > get_helm.sh
        chmod 700 get_helm.sh
        ./get_helm.sh

## Add a repo to helm

        helm repo add stable https://kubernetes-charts.storage.googleapis.com/

## Install Prometheus

        helm install prometheus stable/prometheus \
            --namespace prometheus \
            --set alertmanager.persistentVolume.storageClass="gp2",server.persistentVolume.storageClass="gp2"

## See things

        kubectl get pods -n prometheus

        kubectl --namespace=prometheus port-forward deploy/prometheus-server 9090

open http://localhost:9090
or

        export POD_NAME=$(kubectl get pods --namespace prometheus -l "app=prometheus,component=pushgateway" -o jsonpath="{.items[0].metadata.name}")
        kubectl --namespace prometheus port-forward $POD_NAME 9091


